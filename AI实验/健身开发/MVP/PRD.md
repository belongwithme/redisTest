您好！我已经阅读了您提供的文件《综合扣篮训练计划.html》和《训练计划网页功能完善指南.md》。

以下是基于这些文件为您整理的开发训练计划网页产品需求文档 (PRD)：

---

## 训练计划网页产品需求文档 (PRD)

**文档版本:** 1.0
**创建日期:** 2025年7月4日
**最后更新:** 2025年7月4日
**作者:** Gemini

### 1. 引言

#### 1.1 项目背景
本产品旨在为用户提供一个综合性的在线训练计划平台，特别是针对扣篮训练。通过科学化的训练指导、个人数据追踪、能力诊断和进度可视化，帮助用户释放弹跳潜能，实现训练目标。现有产品原型《综合扣篮训练计划.html》已具备基础的用户界面和交互功能，同时《训练计划网页功能完善指南.md》为后续的全栈应用开发提供了详细的技术栈分析和实施路线图。

#### 1.2 项目目标
* 提供一个用户友好的训练计划管理和追踪平台。
* 通过数据分析和可视化，帮助用户理解自身能力并追踪训练进展。
* 将前端原型升级为生产就绪、可扩展且安全的完整全栈Web应用。
* 降低开发复杂性，加速产品上市时间。

#### 1.3 目标用户
* 希望提升弹跳能力，特别是以扣篮为目标的篮球爱好者。
* 寻求科学、系统化训练指导的个人。
* 希望方便记录和追踪训练数据的健身爱好者。

### 2. 功能需求

本产品将分为MVP (最小可行产品) 和未来迭代功能两个阶段进行规划。

#### 2.1 MVP (最小可行产品) 功能

MVP阶段旨在构建一个核心、可用的训练追踪器，包含以下模块：

##### 2.1.1 用户认证与个人资料管理
* **注册/登录/登出:**
    * 用户可以通过电子邮件和密码注册账户。
    * 支持用户登录和登出功能。
    * 提供密码找回/重置功能。
    *
* **个人资料录入与查看:**
    * 用户可以录入和修改身高、体重等身体数据。
    * 用户可以录入和修改深蹲、硬拉、卧推等力量数据。
    * 用户可以录入和修改当前摸高数据。
    * 系统根据用户输入数据自动计算“需提升”的弹跳高度（目标摸高 - 当前摸高）。
    *

##### 2.1.2 能力诊断分析
* **弹跳能力分析图表:**
    * 基于用户输入的当前摸高和身高，计算并显示当前弹跳高度（例如，使用甜甜圈图）。
    *
* **力量结构评估图表:**
    * 基于用户输入的深蹲、硬拉、卧推数据和体重，显示力量比（例如，雷达图）。
    * 提供目标力量水平作为参照。
    *
* **核心问题分析:**
    * 系统根据预设规则或用户输入，识别并展示潜在的核心问题，如“干扰效应”、“力量失衡”、“稳定性缺失”。
    * 对每个问题提供简要说明。
    *

##### 2.1.3 科学训练计划展示
* **阶段性训练计划:**
    * 展示多阶段的训练计划（例如，“第一阶段：基础重建”、“第二阶段：爆发力发展”、“第三阶段：技术整合”）。
    * 每个阶段应有明确的“阶段目标”。
    * 每个阶段包含不同的训练模块，并列出具体的训练项目、组数和次数（例如，“泡沫轴放松”、“蚌式开合 (3×15)”）。
    * 支持通过标签页切换不同阶段的计划展示。
    *

##### 2.1.4 训练进度追踪
* **弹跳高度进展图表:**
    * 展示用户弹跳高度随时间变化的折线图，用于追踪进展。
    *
* **训练进度环形图:**
    * 展示总体训练进度的百分比环形图。
    * 百分比计算基于当前摸高与目标摸高的比例。
    *
* **训练记录功能:**
    * 提供手动记录当日训练的功能。
    * 已记录的训练应显示在训练记录列表中。
    *
    * **后端支持:** 将用户训练数据（完成的动作、组数、次数、重量等）记录到数据库 `workout_logs` 和 `logged_sets` 表中。
    *

##### 2.1.5 工具箱
* **弹跳计算器:** 提供一个工具，根据身高和当前摸高计算所需弹跳高度。
* **训练计时器:** 提供基本的计时功能，用于管理训练和休息时间。
* **分享计划:** 支持将训练计划分享给朋友或教练，通过复制链接或调用系统分享功能。
*

#### 2.2 未来迭代功能 (非MVP)

* **动作库管理:**
    * 用户可以查看所有可用的训练动作列表。
    * 每个动作包含名称、描述、所属肌肉群、所需器械和演示视频/图片URL。
    * 通过集成第三方API（如ExerciseDB API）自动填充动作数据。
    *
* **自定义训练计划创建:**
    * 用户可以创建、修改和删除自己的个性化训练计划。
    * 允许用户从动作库中选择动作并添加到计划中，设定目标组数、次数和备注。
    *
* **训练历史日历视图:**
    * 提供一个日历视图，直观展示用户过去的训练日期。
    * 点击特定日期可查看当日的详细训练日志。
    *
* **高级分析与报告:**
    * 提供更详细的图表（例如，特定动作的重量进展、训练量趋势）。
    * 生成进度报告，识别用户的薄弱环节。
* **社交功能:**
    * 好友系统，允许用户关注朋友的训练进展。
    * 分享训练计划或训练成果到社交媒体。
    * 排行榜功能。
* **游戏化:**
    * 设置成就和徽章，激励用户保持训练一致性或打破个人记录。
* **实时功能:**
    * 支持与朋友或教练实时分享训练状态。
    *
* **营养追踪:** (重大扩展，可能需要新的外部API集成)
    * 允许用户记录饮食和营养摄入。

### 3. 非功能性需求

#### 3.1 性能
* **加载速度:** 页面加载时间应最小化，以提供流畅的用户体验。
* **响应速度:** 用户操作（如数据输入、图表刷新）应能快速响应。
* **图表渲染:** 图表应快速渲染并支持动态更新。

#### 3.2 可用性 (UX)
* **直观的用户界面:** 界面设计应简洁、直观，用户无需复杂学习即可上手使用。
* **移动优先:** 界面应在不同尺寸的设备（特别是手机）上表现良好，提供优质的移动端体验。
* **易于数据输入:** 训练记录界面应提供大的点击目标和最少的打字输入，方便在健身房使用。
* **视觉反馈:** 通过图表、进度条等提供清晰的视觉反馈。

#### 3.3 安全性
* **用户数据保护:** 所有用户数据（包括个人资料、训练日志）必须安全存储和传输。
* **权限控制:** 严格控制用户只能访问和修改自己的数据，防止未授权访问 (A01: 权限控制失效)。
* **防止注入攻击:** 所有用户输入都应进行验证和净化，防止SQL注入等攻击 (A03: 注入)。
* **密码安全:** 用户密码应进行哈希处理并安全存储 (A02: 加密失败)。
* **API密钥保护:** 敏感的API密钥和配置信息应通过环境变量管理，避免硬编码或泄露 (A05: 安全配置错误)。
*
* **HTTPS:** 所有数据传输必须通过HTTPS加密。

#### 3.4 可扩展性
* **架构设计:** 采用模块化、可扩展的架构，支持未来功能和用户规模的增长。
* **数据库:** 数据库设计应能支持大量用户和数据存储，并易于索引和优化查询。

#### 3.5 部署与维护
* **自动化部署:** 支持持续集成/持续部署 (CI/CD)，实现代码提交后自动构建和部署。
* **监控与日志:** 具备监控系统，追踪应用性能和错误，并记录关键日志。
* **易于维护:** 代码库结构清晰，文档完善，便于后续维护和迭代。

### 4. 技术栈选型

根据《训练计划网页功能完善指南.md》的分析和建议，核心技术栈如下：

* **前端框架:** SvelteKit
    * 理由: 卓越的运行时性能，更小的文件体积，简洁的语法，开箱即用的全栈体验（路由、SSR、API端点）。
    *
* **CSS 框架:** Tailwind CSS
    * 理由: “功能优先”方法，便于构建自定义且高度优化的UI，生成小型生产CSS文件。
* **后端即服务 (BaaS):** Supabase
    * 理由: 集成的PostgreSQL数据库，数据库原生认证和行级安全（RLS），自动生成RESTful API，慷慨的免费套餐。
    *
* **托管平台:** Vercel (前端 + 无服务器函数)
    * 理由: 对SvelteKit等现代前端框架提供一流支持，无缝的Git-push CI/CD，全球边缘网络。
* **图表库:** Chart.js
    * 理由: 框架无关，易于集成，提供多种图表类型。
* **外部API (数据填充):** ExerciseDB API 或 API-Ninjas Exercises API (用于填充动作库)

### 5. 数据库设计 (MVP阶段)

MVP阶段的数据库模式将主要关注用户资料、训练计划和训练日志的核心数据，直接采用《训练计划网页功能完善指南.md》中定义的模式：

| 表名 | 列名 | 数据类型 | 约束/说明 |
| :--- | :--- | :--- | :--- |
| **profiles** | id | uuid | "主键, 外键关联 auth.users.id" |
| | username | text | "唯一, 非空" |
| | avatar_url | text | |
| | updated_at | timestamp with time zone | |
| **exercises** | id | bigint | 主键 (自增) |
| | name | text | "非空, 唯一" |
| | description | text | |
| | muscle_group | text | "例如: 'chest', 'back', 'legs'" |
| | equipment | text | "例如: 'barbell', 'dumbbell'" |
| | video_url | text | 演示 GIF/视频的 URL |
| **workout_plans**| id | bigint | 主键 (自增) |
| | user_id | uuid | 外键关联 profiles.id |
| | name | text | "例如: ""推力日""" |
| | description | text | |
| **plan_exercises**| plan_id | bigint | 外键关联 workout_plans.id |
| | exercise_id | bigint | 外键关联 exercises.id |
| | target_sets | integer | |
| | target_reps | text | "例如: ""8-12""" |
| | notes | text | |
| **workout_logs**| id | bigint | 主键 (自增) |
| | user_id | uuid | 外键关联 profiles.id |
| | plan_id | bigint | 外键关联 workout_plans.id (可选) |
| | date | date | 非空 |
| | duration_minutes| integer | |
| **logged_sets** | id | bigint | 主键 (自增) |
| | log_id | bigint | 外键关联 workout_logs.id |
| | exercise_id | bigint | 外键关联 exercises.id |
| | set_number | integer | 非空 |
| | reps | integer | |
| | weight_kg | numeric | |
| | notes | text | |


### 6. API 端点规范 (MVP阶段)

MVP阶段的核心API端点将遵循RESTful设计原则，并通过SvelteKit的API路由实现：

| HTTP 方法 | URL 路径 | 用途 | 需要认证? | 请求体示例 |
| :--- | :--- | :--- | :--- | :--- |
| GET | /api/plans | 获取已认证用户的所有训练计划。 | 是 (JWT) | N/A |
| POST | /api/plans | 为用户创建一个新的训练计划。 | 是 (JWT) | `{"name": "腿部日", "exercises": [...]}` |
| GET | /api/logs | 获取用户过去训练日志的摘要（例如，用于日历视图）。 | 是 (JWT) | N/A |
| POST | /api/logs | 记录一次完成的训练。 | 是 (JWT) | `{"plan_id": 1, "date": "2024-10-27", "sets": [...]}` |
| DELETE | /api/logs/:id| 删除一个特定的训练日志。 | 是 (JWT) | N/A |


---