<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java开发者精通Elasticsearch学习路线</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f0f4f8;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        .gradient-text {
            background: linear-gradient(to right, #096DD9, #40A9FF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .step-item {
            position: relative;
            padding: 1rem 1.5rem 1rem 3rem;
            background-color: white;
            border-left: 4px solid #91D5FF;
            transition: all 0.3s ease;
        }
        .step-item:not(:last-child) {
            margin-bottom: 1.5rem;
        }
        .step-item:hover {
            border-left-color: #1890FF;
            transform: translateX(5px);
        }
        .step-item::before {
            content: attr(data-step);
            position: absolute;
            left: -20px;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #40A9FF;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center my-8 md:my-16">
            <h1 class="text-4xl md:text-6xl font-bold gradient-text">Java开发者精通Elasticsearch</h1>
            <p class="text-lg md:text-xl text-gray-600 mt-4 max-w-3xl mx-auto">一份从入门到精通的单页学习路线图，助你解锁全文搜索与大数据分析的强大能力。</p>
        </header>

        <main class="space-y-16">

            <section id="foundation">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">第一部分：奠定基础</h2>
                    <p class="text-gray-600 mt-2">理解Elasticsearch的“是什么”与“为什么”，以及它的核心架构。</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch">
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h3 class="text-xl font-bold mb-4 text-center text-[#096DD9]">ES vs. 关系型数据库 (MySQL)</h3>
                        <p class="text-sm text-gray-600 mb-4">ES并非要取代MySQL，而是功能互补。在现代架构中，它们常常协同工作，MySQL作为记录系统(SoR)，ES作为搜索与分析系统。</p>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left">
                                <thead class="bg-[#E6F7FF] text-[#096DD9]">
                                    <tr>
                                        <th class="p-2 rounded-tl-md">特性</th>
                                        <th class="p-2">Elasticsearch</th>
                                        <th class="p-2 rounded-tr-md">MySQL</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b"><td class="p-2 font-semibold">核心优势</td><td class="p-2">全文搜索, 实时分析</td><td class="p-2">事务, 数据一致性</td></tr>
                                    <tr class="border-b"><td class="p-2 font-semibold">数据结构</td><td class="p-2">JSON文档 (非结构化)</td><td class="p-2">表/行/列 (结构化)</td></tr>
                                    <tr class="border-b"><td class="p-2 font-semibold">查询语言</td><td class="p-2">Query DSL (JSON)</td><td class="p-2">SQL</td></tr>
                                    <tr><td class="p-2 font-semibold">扩展性</td><td class="p-2">水平扩展 (天生)</td><td class="p-2">垂直扩展 (为主)</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg flex flex-col justify-center">
                        <h3 class="text-xl font-bold mb-4 text-center text-[#096DD9]">核心架构概念</h3>
                        <div class="space-y-3 text-center">
                            <div class="p-3 bg-[#BAE7FF] rounded-lg border-2 border-[#91D5FF]">
                                <p class="font-bold text-lg text-[#096DD9]">集群 (Cluster)</p>
                                <p class="text-sm text-gray-700">一个或多个节点的集合</p>
                                <div class="mt-3 p-3 bg-[#E6F7FF] rounded-lg border-2 border-[#BAE7FF]">
                                    <p class="font-bold text-md text-[#096DD9]">节点 (Node)</p>
                                    <p class="text-sm text-gray-700">一个ES实例</p>
                                    <div class="mt-3 p-3 bg-white rounded-lg border-2 border-[#E6F7FF]">
                                        <p class="font-bold text-md text-[#096DD9]">索引 (Index)</p>
                                        <p class="text-sm text-gray-700">相似文档的集合 (类似数据库)</p>
                                        <div class="grid grid-cols-2 gap-2 mt-2">
                                           <div class="p-2 bg-gray-50 rounded">
                                               <p class="font-semibold text-sm">分片 (Shard)</p>
                                               <p class="text-xs">索引的水平分区</p>
                                           </div>
                                            <div class="p-2 bg-gray-50 rounded">
                                               <p class="font-semibold text-sm">副本 (Replica)</p>
                                               <p class="text-xs">分片的拷贝</p>
                                           </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="getting-started">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">第二部分：入门实践</h2>
                    <p class="text-gray-600 mt-2">使用Docker快速搭建你的第一个本地开发环境。</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold mb-6 text-center text-[#096DD9]">本地环境部署流程</h3>
                    <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0 md:space-x-4">
                        <div class="text-center p-4 rounded-lg flex-1">
                            <div class="text-4xl mb-2">1️⃣</div>
                            <h4 class="font-bold">安装 Docker</h4>
                            <p class="text-sm text-gray-600">现代化开发的基础</p>
                        </div>
                        <div class="text-2xl text-[#91D5FF] font-light hidden md:block">→</div>
                        <div class="text-center p-4 rounded-lg flex-1">
                            <div class="text-4xl mb-2">2️⃣</div>
                            <h4 class="font-bold">配置系统</h4>
                            <p class="text-sm text-gray-600">设置 vm.max_map_count</p>
                        </div>
                        <div class="text-2xl text-[#91D5FF] font-light hidden md:block">→</div>
                        <div class="text-center p-4 rounded-lg flex-1">
                            <div class="text-4xl mb-2">3️⃣</div>
                            <h4 class="font-bold">运行 ES 容器</h4>
                            <p class="text-sm text-gray-600">启动核心服务</p>
                        </div>
                         <div class="text-2xl text-[#91D5FF] font-light hidden md:block">→</div>
                        <div class="text-center p-4 rounded-lg flex-1">
                            <div class="text-4xl mb-2">4️⃣</div>
                            <h4 class="font-bold">运行 Kibana</h4>
                            <p class="text-sm text-gray-600">你的可视化管理后台</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="query-dsl">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">第三 & 四部分：搜索的艺术</h2>
                    <p class="text-gray-600 mt-2">掌握与ES交互的语言：REST API与Query DSL。</p>
                </div>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h3 class="text-xl font-bold mb-4 text-center text-[#096DD9]">查询上下文 vs 过滤上下文</h3>
                        <p class="text-sm text-gray-600 mb-4">这是Query DSL性能和相关性调优的核心。`must/should`关心“匹配多好”，计算得分；`filter/must_not`只关心“是否匹配”，不计算得分，速度快且可缓存。</p>
                        <div class="chart-container">
                            <canvas id="contextChart"></canvas>
                        </div>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h3 class="text-xl font-bold mb-4 text-center text-[#096DD9]">`bool`查询：万能组合器</h3>
                        <p class="text-sm text-gray-600 mb-4">`bool`查询让你组合多个子查询。最佳实践是将影响相关性的条件放`must`，将起筛选作用的条件放`filter`。</p>
                        <div class="bg-gray-800 text-white p-4 rounded-md font-mono text-xs overflow-x-auto">
<pre><code>POST /products/_search
{
  "query": {
    "bool": {
      <span class="text-yellow-400">"must"</span>: [
        { "match": { "name": "laptop" } }
      ],
      <span class="text-green-400">"filter"</span>: [
        { "term":  { "brand.keyword": "TechCorp" } },
        { "range": { "price": { "lte": 1500 } } }
      ]
    }
  }
}
</code></pre>
                        </div>
                         <div class="mt-4 space-y-2 text-sm">
                            <p><strong class="text-yellow-600">must (查询上下文):</strong> 必须匹配，计算相关性得分。回答“多相关？”</p>
                            <p><strong class="text-green-600">filter (过滤上下文):</strong> 必须匹配，不计算得分，可缓存。回答“是否匹配？”</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="analysis-mapping">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">第五部分：深入底层</h2>
                    <p class="text-gray-600 mt-2">理解文本分析与数据映射如何工作。</p>
                </div>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h3 class="text-xl font-bold mb-4 text-center text-[#096DD9]">文本分析流程</h3>
                        <p class="text-sm text-gray-600 mb-6">文本分析是将非结构化文本转换为可搜索的、标准化的词条（Token）的过程。</p>
                        <div class="flex items-center justify-around text-center">
                            <div class="w-1/4">
                                <p class="font-bold">字符过滤器</p>
                                <p class="text-xs">如去除HTML标签</p>
                            </div>
                            <div class="text-2xl text-[#91D5FF] font-light">→</div>
                             <div class="w-1/4">
                                <p class="font-bold text-[#096DD9]">分词器</p>
                                <p class="text-xs">将文本拆分成词条</p>
                            </div>
                            <div class="text-2xl text-[#91D5FF] font-light">→</div>
                             <div class="w-1/4">
                                <p class="font-bold">词条过滤器</p>
                                <p class="text-xs">如转小写、去停用词</p>
                            </div>
                        </div>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h3 class="text-xl font-bold mb-4 text-center text-[#096DD9]">核心数据类型: `text` vs `keyword`</h3>
                        <p class="text-sm text-gray-600 mb-4">对于字符串字段，`text`用于全文搜索（会被分析），`keyword`用于精确匹配、排序和聚合（不被分析）。使用`multi-fields`可以兼得两者优势。</p>
                        <div class="chart-container">
                            <canvas id="typeChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <section id="aggregations">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">第六部分：超越搜索</h2>
                    <p class="text-gray-600 mt-2">使用聚合(Aggregations)进行强大的数据分析。</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold mb-4 text-center text-[#096DD9]">聚合实战：分析各品牌商品平均价格</h3>
                    <p class="text-sm text-gray-600 mb-4 text-center max-w-2xl mx-auto">聚合的威力在于嵌套。以下图表通过外层的<strong class="text-[#096DD9]">桶聚合</strong>（`terms`按品牌分组）和内层的<strong class="text-[#40A9FF]">指标聚合</strong>（`avg`计算平均价格），直观展示了分析结果。</p>
                    <div class="chart-container">
                        <canvas id="aggChart"></canvas>
                    </div>
                </div>
            </section>

            <section id="java-integration">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">第七部分：Java开发者的利器</h2>
                    <p class="text-gray-600 mt-2">使用Spring Data Elasticsearch提供的“抽象阶梯”简化开发。</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold mb-6 text-center text-[#096DD9]">Spring Data查询抽象阶梯</h3>
                    <div class="w-full max-w-2xl mx-auto">
                        <div class="step-item" data-step="1">
                            <h4 class="font-bold text-lg">派生查询 (Derived Queries)</h4>
                            <p class="text-sm text-gray-600">最简单。根据方法名自动生成查询，适用于简单查找。</p>
                            <p class="font-mono text-xs mt-1 bg-gray-100 p-1 rounded">`List<Product> findByBrand(String brand);`</p>
                        </div>
                        <div class="step-item" data-step="2">
                            <h4 class="font-bold text-lg">`@Query` 注解</h4>
                            <p class="text-sm text-gray-600">更灵活。直接编写JSON格式的Query DSL。</p>
                             <p class="font-mono text-xs mt-1 bg-gray-100 p-1 rounded">`@Query("{\"match\": {\"name\": \"?0\"}}")`</p>
                        </div>
                        <div class="step-item" data-step="3">
                            <h4 class="font-bold text-lg">ElasticsearchOperations</h4>
                            <p class="text-sm text-gray-600">终极控制。以编程方式构建任何复杂查询和聚合。</p>
                             <p class="font-mono text-xs mt-1 bg-gray-100 p-1 rounded">`elasticsearchOperations.search(query, ...)`</p>
                        </div>
                    </div>
                     <p class="text-center mt-6 text-gray-600">根据任务复杂性，选择最合适的阶梯，在开发效率和灵活性之间找到平衡。</p>
                </div>
            </section>

            <section id="learning">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">第八部分：精通之路</h2>
                    <p class="text-gray-600 mt-2">持续学习，保持成长。</p>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 text-center">
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                        <div class="text-4xl mb-3">📚</div>
                        <h4 class="font-bold text-lg">官方文档</h4>
                        <p class="text-sm text-gray-600">最权威、最准确的信息来源。</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                        <div class="text-4xl mb-3">📝</div>
                        <h4 class="font-bold text-lg">官方博客</h4>
                        <p class="text-sm text-gray-600">获取最新功能和最佳实践。</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                         <div class="text-4xl mb-3">💬</div>
                        <h4 class="font-bold text-lg">社区论坛</h4>
                        <p class="text-sm text-gray-600">与全球开发者交流问题。</p>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                         <div class="text-4xl mb-3">🏆</div>
                        <h4 class="font-bold text-lg">培训与认证</h4>
                        <p class="text-sm text-gray-600">验证并展示你的专业能力。</p>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-16 py-6 border-t">
            <p class="text-gray-500">信息图根据提供的学习路线生成 | 祝你学习愉快！</p>
        </footer>
    </div>

<script>
// Ocean Breeze Color Palette
const colors = {
    primary: '#1890FF',
    secondary: '#40A9FF',
    light: '#91D5FF',
    lighter: '#BAE7FF',
    background: '#E6F7FF',
    text: '#096DD9'
};

const tooltipCallback = {
    plugins: {
        tooltip: {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                      return label.join(' ');
                    } else {
                      return label;
                    }
                }
            }
        },
        legend: {
            position: 'top',
        },
    },
    maintainAspectRatio: false,
    responsive: true
};

function wrapLabel(str, maxWidth) {
    if (str.length <= maxWidth) {
        return str;
    }
    const words = str.split(' ');
    let lines = [];
    let currentLine = '';
    for (const word of words) {
        if ((currentLine + word).length > maxWidth && currentLine.length > 0) {
            lines.push(currentLine.trim());
            currentLine = word + ' ';
        } else {
            currentLine += word + ' ';
        }
    }
    lines.push(currentLine.trim());
    return lines;
}

// Chart 1: Query Context vs Filter Context
const ctxContext = document.getElementById('contextChart').getContext('2d');
new Chart(ctxContext, {
    type: 'bar',
    data: {
        labels: ['性能/速度', '相关性得分计算'],
        datasets: [{
            label: '查询上下文 (must/should)',
            data: [60, 100],
            backgroundColor: colors.secondary,
            borderColor: colors.primary,
            borderWidth: 1
        }, {
            label: '过滤上下文 (filter)',
            data: [100, 0],
            backgroundColor: colors.light,
            borderColor: colors.secondary,
            borderWidth: 1
        }]
    },
    options: { ...tooltipCallback,
        scales: {
            y: {
                beginAtZero: true,
                max: 110,
                ticks: {
                    callback: function(value) {
                        return value + '%'
                    }
                }
            }
        }
    }
});

// Chart 2: text vs keyword
const ctxType = document.getElementById('typeChart').getContext('2d');
new Chart(ctxType, {
    type: 'doughnut',
    data: {
        labels: ['Text (用于全文搜索)', 'Keyword (用于精确匹配、聚合、排序)'],
        datasets: [{
            label: '字符串字段用途',
            data: [55, 45],
            backgroundColor: [colors.secondary, colors.light],
            borderColor: [colors.primary, colors.secondary],
            hoverOffset: 4
        }]
    },
    options: { ...tooltipCallback }
});

// Chart 3: Aggregations
const ctxAgg = document.getElementById('aggChart').getContext('2d');
new Chart(ctxAgg, {
    type: 'bar',
    data: {
        labels: ['TechCorp', 'ClickMaster', 'GadgetPro', 'InnoTech', 'DataWave'].map(l => wrapLabel(l, 16)),
        datasets: [{
            label: '各品牌平均价格 ($)',
            data: [1250, 65, 340, 980, 550],
            backgroundColor: [colors.secondary, colors.light, colors.secondary, colors.light, colors.secondary],
            borderColor: colors.primary,
            borderWidth: 1
        }]
    },
    options: { ...tooltipCallback,
        scales: {
            y: {
                beginAtZero: true,
                ticks: {
                     callback: function(value) {
                        return '$' + value;
                    }
                }
            }
        }
    }
});
</script>

</body>
</html>
