# ZSet
## 什么是Zset
Zset 是 Redis 中的有序集合数据结构，它将每个成员与一个分数（score）关联，并根据分数对成员进行排序。

## 底层实现
- ziplist（压缩列表）：当数据量较小时使用
- skiplist（跳表）：当数据量较大时使用

在 skiplist 编码方式中，Redis 实际上同时使用了跳跃表和哈希表两种数据结构：
1. 跳跃表按照分数排序所有元素，提供高效的范围查询
2. 哈希表保存成员到分数的映射，提供 O(1) 时间复杂度的单点查询

## 有几种编码格式
- ziplist : 
ziplist编码的Zset使用压缩列表作为底层数据结构。
- skiplist+hashtable:
skiplist编码的Zset使用跳表和哈希表作为底层数据结构。

## ziplist和skiplist的编码条件
- 当Zset的元素数量小于128个,且每个元素的键值对长度小于64字节时,使用ziplist编码.
- 当Zset的元素数量大于128个,或每个元素的键值对长度大于64字节时,使用skiplist编码.


## 跳表插入一条数据的时间复杂度是多少,为什么?
跳表的插入操作需要先找到插入位置,而跳表的查询是基于二分查找的,所以时间复杂度是O(logn).

## 为什么跳表和哈希表要同时使用?
因为为了结合两个数据结构的优势,当ZSet要根据成员查询分数时,使用哈希表,因为哈希表的查询是O(1).
当ZSet要根据分数查询成员时,使用跳表,因为跳表的查询是基于二分查找的,时间复杂度是O(logn).

## 跳表的层高是怎么决定的?
跳表的层高是根据概率决定的,每增加一层的概率是1/4,最高层数为32.












